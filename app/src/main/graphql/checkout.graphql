mutation CreateBacking($projectId: ID!, $amount: String!, $paymentType: String!, $paymentSourceId: String!, $locationId: String, $rewardId: ID, $refParam: String) {
  createBacking(input: {projectId: $projectId, amount: $amount, paymentType: $paymentType, paymentSourceId: $paymentSourceId, locationId: $locationId, rewardId: $rewardId, refParam: $refParam}) {
    checkout {
      id
      backing {
        clientSecret
        requiresAction
      }
    }
  }
}

mutation CancelBacking($backingId: ID!, $note: String) {
  cancelBacking(input: {id: $backingId, note: $note}) {
    backing {
      status
    }
  }
}

mutation UpdateBacking($backingId: ID!, $amount: String, $locationId: String, $rewardId: ID, $paymentSourceId: String)  {
  updateBacking(input: { id: $backingId, amount: $amount, locationId: $locationId, rewardId: $rewardId, paymentSourceId: $paymentSourceId}) {
    checkout {
      id
      backing {
        clientSecret
        requiresAction
      }
    }
  }
}

query GetBacking($backingId: ID!) {
  backing(id: $backingId){
    id
    status
    sequence
    pledgedOn
    backerCompleted
    cancelable
    shippingAmount {
      amount
      currency
      symbol
    }
    location {
      id
      displayableName
    }
    amount {
      amount
      currency
      symbol
    }
    shippingAmount {
      amount
    }
    reward {
      id
      name
      backersCount
      description
      estimatedDeliveryOn
      items {
        nodes {
          name
        }
      }
      amount {
        amount
        currency
        symbol
      }
    }
    backer {
      imageUrl(blur: false, width: 54)
      name
      id
    }
  }
}
